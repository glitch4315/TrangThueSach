<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thanh Toán - BookFire</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #0f0f0f; color: #e0e0e0; }

        .header { background: #1a1a1a; border-bottom: 1px solid #2a2a2a; padding: 1rem 0; }
        .nav-container { max-width: 1400px; margin: 0 auto; padding: 0 2rem; display: flex; align-items: center; justify-content: space-between; }
        .logo { font-size: 1.8rem; font-weight: bold; color: #ff6b6b; text-decoration: none; }
        .logo span { color: #fff; }

        .container { max-width: 1200px; margin: 0 auto; padding: 3rem 2rem; }
        h1 { color: white; font-size: 2.5rem; margin-bottom: 2rem; }

        .checkout-content { display: grid; grid-template-columns: 1fr 400px; gap: 2rem; }

        .checkout-form { background: #1a1a1a; border-radius: 12px; padding: 2rem; }
        .section-title { color: white; font-size: 1.5rem; margin-bottom: 1.5rem; padding-bottom: 1rem; border-bottom: 1px solid #2a2a2a; }

        .form-group { margin-bottom: 1.5rem; }
        .form-group label { display: block; color: white; margin-bottom: 0.5rem; font-weight: 600; }
        .form-group input, .form-group textarea { width: 100%; padding: 0.8rem; background: #2a2a2a; border: 1px solid #3a3a3a; border-radius: 8px; color: white; font-size: 1rem; font-family: inherit; }
        .form-group input:focus, .form-group textarea:focus { outline: none; border-color: #ff6b6b; }
        .form-group textarea { resize: vertical; min-height: 100px; }

        .payment-methods { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; }
        .payment-option { position: relative; }
        .payment-option input[type="radio"] { position: absolute; opacity: 0; }
        .payment-option label { display: block; padding: 1rem; background: #2a2a2a; border: 2px solid #3a3a3a; border-radius: 8px; cursor: pointer; text-align: center; transition: all 0.3s; }
        .payment-option input[type="radio"]:checked + label { background: #ff6b6b; border-color: #ff6b6b; color: white; }
        .payment-option label:hover { border-color: #ff6b6b; }

        .order-summary { background: #1a1a1a; border-radius: 12px; padding: 2rem; height: fit-content; position: sticky; top: 2rem; }
        .summary-title { color: white; font-size: 1.5rem; margin-bottom: 1.5rem; }

        .order-item { display: flex; justify-content: space-between; margin-bottom: 1rem; padding-bottom: 1rem; border-bottom: 1px solid #2a2a2a; }
        .order-item:last-child { border-bottom: none; }
        .item-info { flex: 1; }
        .item-name { color: white; font-weight: 600; margin-bottom: 0.3rem; }
        .item-details { color: #888; font-size: 0.9rem; }
        .item-price { color: #ff6b6b; font-weight: bold; }

        .summary-row { display: flex; justify-content: space-between; margin-bottom: 1rem; color: #b0b0b0; }
        .summary-row.total { font-size: 1.5rem; color: white; font-weight: bold; padding-top: 1rem; border-top: 1px solid #2a2a2a; margin-top: 1rem; }

        .btn { padding: 1rem 2rem; border: none; border-radius: 8px; font-size: 1.1rem; cursor: pointer; transition: all 0.3s; font-weight: 600; text-decoration: none; display: block; text-align: center; }
        .btn-primary { background: #ff6b6b; color: white; width: 100%; margin-top: 1.5rem; }
        .btn-primary:hover { background: #ff5252; transform: translateY(-2px); }

        .alert { padding: 1rem; border-radius: 8px; margin-bottom: 2rem; }
        .alert-info { background: #1a3a4d; color: #4ade80; border: 1px solid #2a4a5d; }

        @media (max-width: 768px) {
            .checkout-content { grid-template-columns: 1fr; }
            .payment-methods { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <header class="header">
        <nav class="nav-container">
            <a href="/" class="logo">Book<span>Fire</span></a>
        </nav>
    </header>

    <div class="container">
        <h1>💳 Thanh Toán</h1>

        <div class="checkout-content">
            <div class="checkout-form">
                <form action="{% url 'process_order' %}" method="post">
                    {% csrf_token %}

                    <h2 class="section-title">Thông Tin Khách Hàng</h2>
                    <div class="form-group">
                        <label>Họ và Tên *</label>
                        <input type="text" name="name" required placeholder="Nguyễn Văn A">
                    </div>
                    <div class="form-group">
                        <label>Email *</label>
                        <input type="email" name="email" required placeholder="email@example.com">
                    </div>
                    <div class="form-group">
                        <label>Số Điện Thoại *</label>
                        <input type="tel" name="phone" required placeholder="0912345678">
                    </div>
                    <div class="form-group">
                        <label>Địa Chỉ Nhận Sách *</label>
                        <textarea name="address" required placeholder="Số nhà, tên đường, phường/xã, quận/huyện, tỉnh/thành phố"></textarea>
                    </div>

                    <h2 class="section-title">Phương Thức Thanh Toán</h2>
                    <div class="payment-methods">
                        <div class="payment-option">
                            <input type="radio" id="cod" name="payment_method" value="cod" checked>
                            <label for="cod">
                                💵<br>Tiền Mặt<br>
                                <small style="color: #888;">Thanh toán khi nhận hàng</small>
                            </label>
                        </div>
                        <div class="payment-option">
                            <input type="radio" id="bank" name="payment_method" value="bank">
                            <label for="bank">
                                🏦<br>Chuyển Khoản<br>
                                <small style="color: #888;">Ngân hàng</small>
                            </label>
                        </div>
                        <div class="payment-option">
                            <input type="radio" id="momo" name="payment_method" value="momo">
                            <label for="momo">
                                📱<br>Ví MoMo<br>
                                <small style="color: #888;">Thanh toán online</small>
                            </label>
                        </div>
                        <div class="payment-option">
                            <input type="radio" id="card" name="payment_method" value="card">
                            <label for="card">
                                💳<br>Thẻ Tín Dụng<br>
                                <small style="color: #888;">Visa, Mastercard</small>
                            </label>
                        </div>
                    </div>

                    <div class="alert alert-info" style="margin-top: 2rem;">
                        ✅ Đơn hàng của bạn sẽ được giao trong vòng 2-3 ngày làm việc
                    </div>

                    <button type="submit" class="btn btn-primary">Xác Nhận Đặt Hàng</button>
                </form>
            </div>

            <div class="order-summary">
                <h3 class="summary-title">Đơn Hàng</h3>

                {% for item in cart_items %}
                <div class="order-item">
                    <div class="item-info">
                        <div class="item-name">{{ item.book_title }}</div>
                        <div class="item-details">{{ item.rental_days }} ngày × {{ item.price_per_day }}k</div>
                    </div>
                    <div class="item-price">{{ item.price_per_day|floatformat:0 }}k</div>
                </div>
                {% endfor %}

                <div class="summary-row">
                    <span>Tạm tính:</span>
                    <span>{{ total|floatformat:0 }}k</span>
                </div>
                <div class="summary-row">
                    <span>Phí giao hàng:</span>
                    <span style="color: #4ade80;">Miễn phí</span>
                </div>
                <div class="summary-row">
                    <span>Giảm giá:</span>
                    <span>0đ</span>
                </div>
                <div class="summary-row total">
                    <span>Tổng cộng:</span>
                    <span>{{ total|floatformat:0 }}k</span>
                </div>
            </div>
        </div>
    </div>
</body>
</html>




