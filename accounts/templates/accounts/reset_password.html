<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ƒê·∫∑t L·∫°i M·∫≠t Kh·∫©u - BookFire</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; display: flex; align-items: center; justify-content: center; padding: 2rem; }

        .auth-container { background: #1a1a1a; border-radius: 16px; padding: 3rem; max-width: 450px; width: 100%; box-shadow: 0 20px 60px rgba(0,0,0,0.3); }

        .logo { text-align: center; margin-bottom: 2rem; }
        .logo a { font-size: 2.5rem; font-weight: bold; color: #ff6b6b; text-decoration: none; }
        .logo span { color: #fff; }

        .icon-container { text-align: center; margin-bottom: 1.5rem; }
        .icon-circle { width: 80px; height: 80px; background: linear-gradient(135deg, #4ade80, #22c55e); border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; font-size: 2.5rem; }

        h1 { color: white; text-align: center; margin-bottom: 0.5rem; font-size: 2rem; }
        .subtitle { color: #888; text-align: center; margin-bottom: 2rem; }

        .form-group { margin-bottom: 1.5rem; }
        .form-group label { display: block; color: white; margin-bottom: 0.5rem; font-weight: 600; font-size: 0.95rem; }
        .form-group input { width: 100%; padding: 1rem; background: #2a2a2a; border: 2px solid #3a3a3a; border-radius: 8px; color: white; font-size: 1rem; transition: border-color 0.3s; }
        .form-group input:focus { outline: none; border-color: #ff6b6b; }
        .form-group input::placeholder { color: #666; }

        .password-strength { margin-top: 0.5rem; height: 4px; background: #2a2a2a; border-radius: 2px; overflow: hidden; }
        .password-strength-bar { height: 100%; width: 0%; transition: all 0.3s; }
        .password-strength-bar.weak { width: 33%; background: #ff6b6b; }
        .password-strength-bar.medium { width: 66%; background: #ffd700; }
        .password-strength-bar.strong { width: 100%; background: #4ade80; }

        .password-requirements { background: #2a2a2a; border-radius: 8px; padding: 1rem; margin-bottom: 1.5rem; }
        .password-requirements h4 { color: white; font-size: 0.9rem; margin-bottom: 0.5rem; }
        .password-requirements ul { list-style: none; padding: 0; }
        .password-requirements li { color: #888; font-size: 0.85rem; padding: 0.3rem 0; }
        .password-requirements li.valid { color: #4ade80; }
        .password-requirements li::before { content: "‚óã "; margin-right: 0.5rem; }
        .password-requirements li.valid::before { content: "‚óè "; }

        .btn { width: 100%; padding: 1rem; border: none; border-radius: 8px; font-size: 1.1rem; font-weight: 600; cursor: pointer; transition: all 0.3s; }
        .btn-primary { background: #ff6b6b; color: white; }
        .btn-primary:hover { background: #ff5252; transform: translateY(-2px); box-shadow: 0 10px 20px rgba(255, 107, 107, 0.3); }

        .alert { padding: 1rem; border-radius: 8px; margin-bottom: 1.5rem; }
        .alert-error { background: #4d1a1a; color: #ff6b6b; border: 1px solid #ff6b6b; }

        @media (max-width: 768px) {
            .auth-container { padding: 2rem 1.5rem; }
        }
    </style>
</head>
<body>
    <div class="auth-container">
        <div class="logo">
            <a href="/">Book<span>Fire</span></a>
        </div>

        <div class="icon-container">
            <div class="icon-circle">üîë</div>
        </div>

        <h1>ƒê·∫∑t M·∫≠t Kh·∫©u M·ªõi</h1>
        <p class="subtitle">T·∫°o m·∫≠t kh·∫©u m·ªõi cho t√†i kho·∫£n c·ªßa b·∫°n</p>

        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }}">{{ message }}</div>
            {% endfor %}
        {% endif %}

        <div class="password-requirements">
            <h4>M·∫≠t kh·∫©u ph·∫£i c√≥:</h4>
            <ul>
                <li id="length">T·ªëi thi·ªÉu 8 k√Ω t·ª±</li>
                <li id="uppercase">√çt nh·∫•t 1 ch·ªØ hoa</li>
                <li id="lowercase">√çt nh·∫•t 1 ch·ªØ th∆∞·ªùng</li>
                <li id="number">√çt nh·∫•t 1 s·ªë</li>
            </ul>
        </div>

        <form method="post">
            {% csrf_token %}

            <div class="form-group">
                <label>M·∫≠t kh·∫©u m·ªõi *</label>
                <input type="password" name="password" id="password" required placeholder="Nh·∫≠p m·∫≠t kh·∫©u m·ªõi" onkeyup="checkPassword()">
                <div class="password-strength">
                    <div class="password-strength-bar" id="strengthBar"></div>
                </div>
            </div>

            <div class="form-group">
                <label>X√°c nh·∫≠n m·∫≠t kh·∫©u *</label>
                <input type="password" name="password2" id="password2" required placeholder="Nh·∫≠p l·∫°i m·∫≠t kh·∫©u" onkeyup="checkMatch()">
                <span id="matchMessage" style="color: #ff6b6b; font-size: 0.85rem; display: none;">M·∫≠t kh·∫©u kh√¥ng kh·ªõp</span>
            </div>

            <button type="submit" class="btn btn-primary" id="submitBtn">ƒê·∫∑t L·∫°i M·∫≠t Kh·∫©u</button>
        </form>
    </div>

    <script>
        function checkPassword() {
            const password = document.getElementById('password').value;
            const strengthBar = document.getElementById('strengthBar');

            // Check requirements
            const length = password.length >= 8;
            const uppercase = /[A-Z]/.test(password);
            const lowercase = /[a-z]/.test(password);
            const number = /[0-9]/.test(password);

            document.getElementById('length').className = length ? 'valid' : '';
            document.getElementById('uppercase').className = uppercase ? 'valid' : '';
            document.getElementById('lowercase').className = lowercase ? 'valid' : '';
            document.getElementById('number').className = number ? 'valid' : '';

            // Calculate strength
            let strength = 0;
            if (length) strength++;
            if (uppercase && lowercase) strength++;
            if (number) strength++;
            if (password.match(/[^a-zA-Z0-9]/)) strength++;

            strengthBar.className = 'password-strength-bar';
            if (strength === 1) strengthBar.classList.add('weak');
            else if (strength === 2 || strength === 3) strengthBar.classList.add('medium');
            else if (strength === 4) strengthBar.classList.add('strong');

            checkMatch();
        }

        function checkMatch() {
            const password = document.getElementById('password').value;
            const password2 = document.getElementById('password2').value;
            const matchMessage = document.getElementById('matchMessage');
            const submitBtn = document.getElementById('submitBtn');

            if (password2.length > 0) {
                if (password !== password2) {
                    matchMessage.style.display = 'block';
                    matchMessage.style.color = '#ff6b6b';
                    matchMessage.textContent = '‚ùå M·∫≠t kh·∫©u kh√¥ng kh·ªõp';
                    submitBtn.disabled = true;
                    submitBtn.style.opacity = '0.5';
                } else {
                    matchMessage.style.display = 'block';
                    matchMessage.style.color = '#4ade80';
                    matchMessage.textContent = '‚úì M·∫≠t kh·∫©u kh·ªõp';
                    submitBtn.disabled = false;
                    submitBtn.style.opacity = '1';
                }
            } else {
                matchMessage.style.display = 'none';
                submitBtn.disabled = false;
                submitBtn.style.opacity = '1';
            }
        }
    </script>
</body>
</html>